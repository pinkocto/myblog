{
  "hash": "d511b04a2aa838cc3466fb5ee1c8914f",
  "result": {
    "markdown": "---\ntitle: \"ARIMA\"\nauthor: 'jiyun Lim'\ndate: '03/01/2023'\ncategories: \n  - R\n  - TS\n  - ML\nformat:\n  html:\n    theme: default\n---\n\n\n## ARIMA\nARIMA 모형은 현 시점의 관측값 $Z_n$을 과거의 관측값 $\\{Z_t, \\space t<n\\}$ 들과 백색잡음(white noise)이라고 부르는 오차 $\\{\\epsilon_t, \\space t\\leq n\\}$ 의 선형결합인\n$$Z_n = f(Z_1, Z_2, \\dots, Z_{n-1}, \\epsilon_1, \\epsilon_2, \\dots, \\epsilon_{n-1}) + \\epsilon_n$$\n의 형태로 표현하는 모형으로, 1970년대에 들어와서 Box와 Jenkins가 ARIMA모형을 적합키는 3단계 절차를 제안한 이후로는 박스-젠킨스 모형(Box-Jenkins model)이라는 이름으로 가장 많이 사용되고 있다.\n\n특히 평활법에 의한 예측방법 가각ㄱ에는 이에 대응되는 추세모형^[가중최소제곱법을 이용한]이 존재하며ㅡ, 이들 또한 ARIMA 모형을 이용한 예측법 중에서 특별한 경우에 해당된다는 것이 밣혀져 있다.^[Abraham and Ledolter(1983)]\n\n여러 개의 시계열변수들로 구성된 벡터 시계열 분석에는 벡터 ARMA(VARMA) 모형을 이용한다.\n\n## Maine\n\n> 1996.1월부터 2006.8 미국 maine 주의 월별 실업률\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.1     ✔ purrr   1.0.1\n✔ tibble  3.1.8     ✔ dplyr   1.1.0\n✔ tidyr   1.3.0     ✔ stringr 1.5.0\n✔ readr   2.1.4     ✔ forcats 1.0.0\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'data.table'\n\nThe following objects are masked from 'package:dplyr':\n\n    between, first, last\n\nThe following object is masked from 'package:purrr':\n\n    transpose\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(ggfortify)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nMaine <- fread('./timeseries/Maine.txt')\nMaine %>% head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   unemploy\n1:      6.7\n2:      6.7\n3:      6.4\n4:      5.9\n5:      5.2\n6:      4.8\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(Maine)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nClasses 'data.table' and 'data.frame':\t128 obs. of  1 variable:\n $ unemploy: num  6.7 6.7 6.4 5.9 5.2 4.8 4.8 4 4.2 4.4 ...\n - attr(*, \".internal.selfref\")=<externalptr> \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(Maine)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"data.table\" \"data.frame\"\n```\n:::\n:::\n\n\n\n## ts객체로 변환\n**ts(data, start, end, frequency = 12, ...)**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nMaine.ts <- ts(Maine$unemploy, start = c(1996,1), frequency = 12)\nclass(Maine.ts)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"ts\"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(Maine.ts)\n```\n\n::: {.cell-output-display}\n![](2023-03-03-arima--cgb2-desktop-s-conflicted-copy-2023-03-10-_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nMaine.2000 <- window(Maine.ts, start = c(2000,1))\nplot(Maine.2000)\n```\n\n::: {.cell-output-display}\n![](2023-03-03-arima--cgb2-desktop-s-conflicted-copy-2023-03-10-_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncbe <- fread('./timeseries/cbe.txt')\ncbe %>% head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   choc beer elec\n1: 1451 96.3 1497\n2: 2037 84.4 1463\n3: 2477 91.2 1648\n4: 2785 81.9 1595\n5: 2994 80.5 1777\n6: 2681 70.4 1824\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nchoc.ts <- ts(cbe$choc, start = 1958, freq=12)\nbeer.ts <- ts(cbe$beer, start = 1968, freq=12)\nelec.ts <- ts(cbe$elec, start = 1968, freq=12)\n\nplot(cbind(choc.ts, beer.ts, elec.ts), main='')\n```\n\n::: {.cell-output-display}\n![](2023-03-03-arima--cgb2-desktop-s-conflicted-copy-2023-03-10-_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncbe %>% \n  ts(start = 1958, freq=12) %>% \n  autoplot(facets = T)\n```\n\n::: {.cell-output-display}\n![](2023-03-03-arima--cgb2-desktop-s-conflicted-copy-2023-03-10-_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglobal <- fread('./timeseries/global.txt')\nglobal %>% head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       V1     V2     V3     V4     V5\n1: -0.384 -0.457 -0.673 -0.344 -0.311\n2: -0.071 -0.246 -0.235 -0.380 -0.418\n3: -0.670 -0.386 -0.437 -0.150 -0.528\n4: -0.692 -0.629 -0.363 -0.375 -0.328\n5: -0.495 -0.646 -0.754 -0.137 -0.452\n6: -1.031 -0.643 -0.328 -0.311 -0.263\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglobal_s <- scan('./timeseries/global.txt')\nglobal_s %>% head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] -0.384 -0.457 -0.673 -0.344 -0.311 -0.071\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglobal_s %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n num [1:1800] -0.384 -0.457 -0.673 -0.344 -0.311 -0.071 -0.246 -0.235 -0.38 -0.418 ...\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(global_s, type = 'l')\n```\n\n::: {.cell-output-display}\n![](2023-03-03-arima--cgb2-desktop-s-conflicted-copy-2023-03-10-_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglobal.ts <- ts(global_s, start = c(1856, 1), freq = 12)\nplot(global.ts, main='')\n```\n\n::: {.cell-output-display}\n![](2023-03-03-arima--cgb2-desktop-s-conflicted-copy-2023-03-10-_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nautoplot(global.ts)\n```\n\n::: {.cell-output-display}\n![](2023-03-03-arima--cgb2-desktop-s-conflicted-copy-2023-03-10-_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n### 회귀직선 추가\n\n::: {.cell}\n\n```{.r .cell-code}\nnew.time <- time(global.ts) # t+(i-1)/freq\nplot(global.ts, main='')\nabline(lm(global.ts~new.time), col = 'red')\n```\n\n::: {.cell-output-display}\n![](2023-03-03-arima--cgb2-desktop-s-conflicted-copy-2023-03-10-_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglobal.ts %>% str()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Time-Series [1:1800] from 1856 to 2006: -0.384 -0.457 -0.673 -0.344 -0.311 -0.071 -0.246 -0.235 -0.38 -0.418 ...\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#autoplot(global.ts) +\n # geom_smooth(method = 'lm')\n```\n:::\n",
    "supporting": [
      "2023-03-03-arima--cgb2-desktop-s-conflicted-copy-2023-03-10-_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}